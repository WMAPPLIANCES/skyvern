# Dockerfile para skyvern-frontend (UI)
FROM node:20.12-slim
WORKDIR /app

# Copiar o código do frontend e o entrypoint
COPY ./skyvern-frontend /app
COPY ./entrypoint-skyvernui.sh /app/entrypoint-skyvernui.sh
RUN chmod +x /app/entrypoint-skyvernui.sh

# As variáveis de ambiente VITE_* serão definidas no Easypanel
# e usadas pelo 'npm run build' dentro do entrypoint-skyvernui.sh.
#
# Exemplo de como elas seriam definidas no Easypanel:
# VITE_API_BASE_URL=/api/v1
# VITE_WSS_BASE_URL=wss://ui.skyvern.wmappliances.cloud/api/v1
# VITE_ARTIFACT_API_BASE_URL=https://ui.skyvern.wmappliances.cloud:9090
# VITE_SKYVERN_API_KEY=sua_chave_api_secreta

# A porta que o 'vite preview' usará (conforme seu comando no entrypoint)
EXPOSE 80

CMD [ "/bin/bash", "/app/entrypoint-skyvernui.sh" ]
